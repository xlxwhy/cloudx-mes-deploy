webpackJsonp([73,218],{"+DSq":function(e,t){},"1Qyq":function(e,t){},"5iVE":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Iz+i"),i={mixins:[a("oW5U").a],data:function(){return{table:{loading:!1,query:{multipleInput:{name:"name",values:{}}},sort:{descs:["createTime"]},page:this.$gtmc.initPage()},detail:{dialog:{visible:!1,loading:!1,title:"文案使用场景",width:"700px"},entity:{}}}},components:{Detail:n.default},mounted:function(){this.loadTable()},methods:{handleClean:function(){this.table.query.multipleInput.name="name"},loadTable:function(){var e=this,t=this.handleQueryParam();console.log(t),this.table.loading=!0,this.$api.ScenarioController.page(t,function(t){e.$gtmc.assembleBody(e.table.page,t.body),e.table.loading=!1})},handleQueryParam:function(){var e=this.$gtmc.assemblePage(this.table),t=this.table.query;return this.$gtmc.appendFilter(e.body.filters,"name","like",t.name),this.$gtmc.appendFilterMultipleInput(e.body.filters,t.multipleInput),this.$gtmc.appendFilterDataTime(e.body.filters,"createTime",t.createTime),e},handleEdit:function(e){this.detail.entity=e||{},this.detail.dialog.visible=!0}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mall-content-scene-list"},[a("xv-list-query",{attrs:{cleanText:"清除查询条件",table:e.table},on:{query:function(t){return e.$handleQuery()},clean:e.handleClean}},[a("xv-field-multiple-input",{attrs:{entity:e.table.query.multipleInput,label:"选择查询类型",placeholder:"输入搜索关键字",options:{values:[{label:"场景名称",value:"name"},{label:"场景Code",value:"code"}]}},on:{done:function(t){return e.$handleInputQuery()}}}),e._v(" "),a("xv-field-datetime",{attrs:{entity:e.table.query,name:"createTime",label:"创建时间"}})],1),e._v(" "),a("xv-button-panel",{attrs:{auths:e.auth.create}},[a("xv-button-add",{attrs:{name:"新增场景"},on:{click:function(t){return e.handleEdit()}}})],1),e._v(" "),a("xv-list-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],attrs:{table:e.table},on:{"sort-change":function(t){return e.$handleQuery()}}},[a("xv-table-column-text",{attrs:{prop:"name",label:"场景名称",sortable:""}}),e._v(" "),a("xv-table-column-id",{attrs:{prop:"code",label:"场景CODE",width:"350",sortable:"",align:"center"}}),e._v(" "),a("xv-table-column-date-time",{attrs:{prop:"createTime",width:"250",label:"创建时间"}}),e._v(" "),a("xv-table-column-action",{key:e.$columnKey(),attrs:{width:"80",auths:e.auth.modify},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("xv-list-page",{attrs:{table:e.table},on:{change:function(t){return e.$handleQuery()}}}),e._v(" "),a("detail",{attrs:{detail:e.detail},on:{done:function(t){return e.$handleQuery()}}})],1)},staticRenderFns:[]};var o=a("VU/8")(i,l,!1,function(e){a("1Qyq")},null,null);t.default=o.exports},"Iz+i":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={props:{detail:{type:Object,default:function(){return{dialog:{visible:!1},entity:{}}}}},data:function(){return{form:{scenarioId:"",name:"",code:""},formRules:{name:this.$rule.name("场景名称",null,32),code:this.$rule.name("场景CODE",null,32)}}},watch:{"detail.dialog.visible":{handler:function(e,t){e&&this.init()},deep:!0}},methods:{init:function(){var e=this;this.form=this.$lodash.pick(this.detail.entity,"scenarioId","name","code"),this.$nextTick(function(){e.$refs.form.clearValidate()})},handleValidate:function(){this.$handleFormValidate("form",this.handleConfirm)},handleConfirm:function(){var e=this,t={body:this.form};this.detail.dialog.loading=!0,console.log(t),this.$api.ScenarioController.save(t,function(t){e.detail.dialog.loading=!1,t&&t.body?(e.$emit("done"),e.detail.dialog.visible=!1):e.$message.error("保存文案使用场景出错")}).catch(function(t){e.detail.dialog.loading=!1})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mall-content-scene-detail"},[a("xv-detail-dialog",{attrs:{dialog:e.detail.dialog},on:{confirm:e.handleValidate}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"场景名称",prop:"name",required:""}},[a("el-input",{attrs:{placeholder:"不超过32个字符"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleValidate(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"场景CODE",prop:"code"}},[a("el-input",{attrs:{placeholder:"不超过32个字符"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleValidate(t)}},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code","string"==typeof t?t.trim():t)},expression:"form.code"}})],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,i,!1,function(e){a("+DSq")},null,null);t.default=l.exports},oW5U:function(e,t,a){"use strict";t.a={data:function(){return{auth:{create:this.$auths("create"),modify:this.$auths("modify"),delete:this.$auths("delete"),view:this.$auths("view"),import:this.$auths("import"),export:this.$auths("export")}}}}}});