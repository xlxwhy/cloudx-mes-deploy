webpackJsonp([113],{ADtT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={mixins:[a("oW5U").a],data:function(){return{TYPES:{undefined:{label:"未知类型订单",name:"trade-order-parts-detail"},null:{label:"未知类型订单",name:"trade-order-parts-detail"},1:{label:"零配件订单",name:"trade-order-parts-detail"},2:{label:"虚拟商品订单",name:"trade-order-virtual-detail"},3:{label:"保养服务订单",name:"trade-order-maintain-detail"}},table:{loading:!1,query:{multipleInput:{name:"orderId",values:{}}},sort:{descs:["firstJob.completeTime"]},page:this.$gtmc.initPage()}}},components:{},mounted:function(){this.loadTable()},methods:{handleClean:function(){this.table.query.multipleInput.name="orderId"},handleQueryParam:function(){var e=this.$gtmc.assemblePage(this.table),t=this.table.query;return this.$gtmc.appendFilter(e.body.filters,"merchant.name","like",t["merchant.name"]),this.$gtmc.appendFilterMultipleInput(e.body.filters,t.multipleInput),this.$gtmc.appendFilterDataTime(e.body.filters,"firstJob.completeTime",t["firstJob.completeTime"]),e},loadTable:function(){var e=this,t=this.handleQueryParam();console.log(t),this.table.loading=!0,this.$api.OrderController.pageUsedOrder(t,function(t){e.table.loading=!1,e.$gtmc.assembleBody(e.table.page,t.body)}).finally(function(){e.table.loading=!1})},handleExport:function(){var e=this,t=this.handleQueryParam();this.$api.OrderController.exportUsedOrder(t,function(t){e.$gtmc.export(t,"EXPORT-USED-ORDER-LIST.xlsx")})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"trade-order-first-list"},[a("xv-list-query",{attrs:{cleanText:"清除查询条件",queryText:"",table:e.table},on:{clean:e.handleClean}},[a("xv-field-multiple-input",{attrs:{entity:e.table.query.multipleInput,label:"选择查询类型",placeholder:"输入搜索关键字",options:{values:[{label:"订单编号",value:"orderId"},{label:"工单号码",value:"firstJob.jobNo"},{label:"OMS订单编号",value:"payment.omsOrderNo"},{label:"第三方流水号",value:"payment.omsThirdPartySerialNo"}]}},on:{done:function(t){return e.$handleInputQuery()}}}),e._v(" "),a("xv-field-datetime",{attrs:{entity:e.table.query,name:"firstJob.completeTime",label:"首次工单完成时间"}}),e._v(" "),a("br"),e._v(" "),a("xv-field-input",{attrs:{entity:e.table.query,name:"merchant.name",label:"经销商名称",placeholder:"请输入经销商名称"},on:{done:function(t){return e.$handleInputQuery()}}}),e._v(" "),a("div",{attrs:{slot:"button"},slot:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$handleQuery()}}},[e._v("查询")]),e._v(" "),a("xv-button-export",{attrs:{name:"导出数据",auths:e.$auths("exportfirstusedlist")},on:{click:function(t){return e.handleExport()}}})],1)],1),e._v(" "),a("el-alert",{attrs:{type:"warning",closable:!1}},[e._v("温馨提示：当销售店在工单上整单订使用或个别使用商城订单中部分零部件时，平台同时会将该订单整单对应的实付金额结算至经销商的虚拟收款账户。")]),e._v(" "),a("xv-list-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],attrs:{table:e.table},on:{"sort-change":function(t){return e.$handleQuery()}}},[a("xv-table-column-id",{attrs:{prop:"orderId",label:"订单编号"}}),e._v(" "),a("xv-table-column-text",{attrs:{label:"订单类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.$enum(e.TYPES,t.row.orderType).label)+"\n      ")]}}])}),e._v(" "),a("xv-table-column-text-list",{attrs:{props:["storeName","storeCode"],align:"center",label:"经销商",width:"180"}}),e._v(" "),a("xv-table-column-id",{attrs:{prop:"jobOrderNo",label:"首个完成工单",sortable:""}}),e._v(" "),a("xv-table-column-date-time",{attrs:{prop:"jobCompleteTime",label:"完成时间"}}),e._v(" "),a("xv-table-column-id",{attrs:{label:"OMS订单编号",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ordPaymentBo?a("div",[e._v("\n          "+e._s(t.row.ordPaymentBo.omsOrderNo)+"\n        ")]):e._e()]}}])}),e._v(" "),a("xv-table-column-id",{attrs:{label:"OMS第三方流水号",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ordPaymentBo?a("div",[e._v("\n          "+e._s(t.row.ordPaymentBo.omsThirdPartySerialNo)+"\n        ")]):e._e()]}}])}),e._v(" "),a("xv-table-column-amount",{attrs:{prop:"orderAmount",label:"订单总金额",width:"90",align:"center"}}),e._v(" "),a("xv-table-column-amount",{attrs:{prop:"discountAmount",label:"订单优惠金额",width:"90",align:"center"}}),e._v(" "),a("xv-table-column-amount",{attrs:{prop:"actualAmount",label:"订单实付金额",tips:"订单实付金额 = 订单总金额 - 订单优惠金额",width:"120",align:"center"}}),e._v(" "),a("xv-table-column-action",{key:e.$columnKey(),attrs:{width:"80",auths:e.$auths("ViewFirstUsedDetail")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("xv-link",{attrs:{name:e.$enum(e.TYPES,t.row.orderType).name,text:"查看详情",query:{orderId:t.row.orderId}}})]}}])})],1),e._v(" "),a("xv-list-page",{attrs:{table:e.table},on:{change:function(t){return e.$handleQuery()}}})],1)},staticRenderFns:[]};var n=a("VU/8")(l,r,!1,function(e){a("IG4y")},null,null);t.default=n.exports},IG4y:function(e,t){},oW5U:function(e,t,a){"use strict";t.a={data:function(){return{auth:{create:this.$auths("create"),modify:this.$auths("modify"),delete:this.$auths("delete"),view:this.$auths("view"),import:this.$auths("import"),export:this.$auths("export")}}}}}});