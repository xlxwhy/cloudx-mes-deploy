webpackJsonp([65,169,246],{"1LGx":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={props:{detail:{type:Object,default:function(){return{dialog:{visible:!1,width:"600px"},entity:{}}}}},watch:{"detail.dialog.visible":{handler:function(t,e){t&&this.init()},deep:!0}},data:function(){return{form:{partsTypeId:"",name:"",description:""},formRules:{name:this.$rule.name("品类名称",null,32),description:this.$rule.lengths("品类说明",null,100)},strongMatch:!1}},created:function(){},methods:{init:function(){var t=this;this.form=this.$lodash.pick(this.detail.entity,"partsTypeId","name","description"),this.$nextTick(function(){t.$refs.form.clearValidate()})},handleConfirm:function(){var t=this,e={body:this.form};this.detail.dialog.loading=!0,console.log(e),this.$api.PartsTypeController.save(e,function(e){t.detail.dialog.loading=!1,t.detail.dialog.visible=!1,t.$emit("done")}).catch(function(e){t.detail.dialog.loading=!1})}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"basic-parts-type-detail"},[i("xv-detail-dialog",{attrs:{dialog:t.detail.dialog,width:t.detail.width},on:{confirm:function(e){return t.$handleFormValidate("form",t.handleConfirm)}}},[i("el-form",{ref:"form",staticClass:"basic-parts-type-detail__content",attrs:{model:t.form,rules:t.formRules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"品类名称",prop:"name",required:""}},[i("el-input",{attrs:{placeholder:"不超过32个字符"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"品类说明",prop:"description"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"不超过100个字符"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"==typeof e?e.trim():e)},expression:"form.description"}})],1),t._v(" "),t._e()],1)],1)],1)},staticRenderFns:[]};var l=i("VU/8")(a,n,!1,function(t){i("OY69")},null,null);e.default=l.exports},OY69:function(t,e){},XOMR:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("1LGx"),n=i("oW5U"),l=i("pyP4"),r={mixins:[n.a,l.default],data:function(){return{loading:!1,dialogVisible:!1,auth:{action:this.$auths("delete","modify")},table:{loading:!1,query:{},sort:{descs:["updateTime"]},page:this.$gtmc.initPage()},detail:{dialog:{visible:!1,loading:!1,title:"零配件品类",width:"700px"},entity:{}},matchTags:{undefined:{type:"info",label:"不需要"},null:{type:"info",label:"不需要"},true:{type:"success",label:"需要"},false:{type:"info",label:"不需要"}},guide:{options:{visible:!1},entity:{}}}},components:{TypeDetail:a.default},created:function(){this.loadTable()},methods:{loadTable:function(){var t=this,e=this.handleQueryParam();this.table.loading=!0,this.$api.PartsTypeController.page(e,function(e){t.$gtmc.assembleBody(t.table.page,e.body),t.table.loading=!1})},handleShowGuide:function(t){this.guide.options=this.handleGuideOptions(t),this.guide.entity=t,this.guide.options.visible=!0},handleQueryParam:function(){var t=this.$gtmc.assemblePage(this.table),e=this.table.query;return this.$gtmc.appendFilter(t.body.filters,"name","like",e.name),console.log(t),t},handleEdit:function(t){this.detail.entity=t||{},this.detail.dialog.visible=!0,this.detail.dialog.loading=!1}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"basic-parts-type-list"},[i("xv-list-query",{attrs:{cleanText:"清除查询条件",table:t.table},on:{query:function(e){return t.$handleQuery()}}},[i("xv-field-input",{attrs:{entity:t.table.query,name:"name",label:"零配件品类名称",placeholder:"请输入品类名称"},on:{done:function(e){return t.$handleInputQuery()}}})],1),t._v(" "),i("xv-button-panel",{attrs:{auths:t.auth.create}},[i("xv-button-add",{attrs:{name:"新增零配件品类"},nativeOn:{click:function(e){return t.handleEdit()}}})],1),t._v(" "),i("xv-list-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],attrs:{table:t.table},on:{"sort-change":function(e){return t.$handleQuery()}}},[i("xv-table-column-id",{attrs:{prop:"partsTypeId",label:"品类ID"}}),t._v(" "),i("xv-table-column-text",{attrs:{prop:"name",label:"品类名称",width:"200",sortable:""}}),t._v(" "),t._e(),t._v(" "),i("xv-table-column-description",{attrs:{prop:"description",label:"品类说明"}}),t._v(" "),i("xv-table-column-date-time",{attrs:{prop:"updateTime",label:"更新时间"}}),t._v(" "),i("xv-table-column-action",{key:t.$columnKey(),attrs:{width:"120",auths:t.auth.action},scopedSlots:t._u([{key:"default",fn:function(e){return[i("xv-button-text",{attrs:{name:"编辑",auths:t.auth.modify},on:{click:function(i){return t.handleEdit(e.row)}}}),t._v(" "),i("xv-button-text",{attrs:{name:"删除",auths:t.auth.delete},on:{click:function(i){return t.$guideDeleteCheck(e.row,t.deleteGuide)}}})]}}])})],1),t._v(" "),i("xv-list-page",{attrs:{table:t.table},on:{change:function(e){return t.$handleQuery()}}}),t._v(" "),i("type-detail",{attrs:{detail:t.detail},on:{done:function(e){return t.$handleQuery()}}}),t._v(" "),i("xv-dialog-guide-delete",{attrs:{guide:t.deleteGuide},on:{confirm:function(e){return t.$guideDelete(t.deleteGuide)}}})],1)},staticRenderFns:[]};var s=i("VU/8")(r,o,!1,function(t){i("smr6")},null,null);e.default=s.exports},oW5U:function(t,e,i){"use strict";e.a={data:function(){return{auth:{create:this.$auths("create"),modify:this.$auths("modify"),delete:this.$auths("delete"),view:this.$auths("view"),import:this.$auths("import"),export:this.$auths("export")}}}}},pyP4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{deleteGuide:{delete:{loading:!1,visible:!1,method:this.$api.PartsTypeController.delete,param:function(t){return{path:{partsTypeId:t.partsTypeId}}},target:"零配件品类",button:{type:"text",text:"删除"},callback:{success:this.$handleQuery,error:function(){}}},check:{method:this.$api.PartsTypeController.checkOperation,param:function(t){return{body:{operation:2,partsTypeId:t.partsTypeId}}},adapter:function(t,e){if(!t||!t.body)return null;if(e?t.body.ifAllowed:t.body.success)return null;var i=[];return t.body.hasRelatedParts&&i.push("10001"),i}},warn:{visible:!1,width:"850px",title:"无法删除零配件品类",message:"",tips:[{name:"零配件",title:"零配件品类解除关联的方法：",contents:["方式一：在已关联的零配件中重新选择另外的品类；","方式二：删除已关联的零配件。"],button:{type:"primary",text:"查看已关联的零配件",link:"basic-parts-list",param:function(t){return{partsTypeId:t.partsTypeId}}}}],map:{10001:[0],10002:[0],10003:[0]},codes:[]}}}},methods:{}}},smr6:function(t,e){}});