webpackJsonp([152],{"eMx/":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){this.$createElement;return{form:{positionId:"",name:"",description:"",status:!0,roleIdList:[]},formRules:{name:this.$rule.name("职位名称",null,32),description:this.$rule.lengths("职位描述",null,100),roleIdList:this.$rule.arrays("请选择至少一个角色")},data:[],transfer:{list:[],render:function(t,e){return t("span",[e.name])}}}},components:{},created:function(){var t=this;this.loadRoles(),this.loadEntity(this.$api.PositionController.get,"positionId",function(e){t.loading=!1,e&&e.body&&(console.log(e.body),e.body.roleIdList=e.body.roleBoList?t.$lodash.map(e.body.roleBoList,function(t){return t.roleId}):[],t.form=e.body)},function(t){console.log(t)})},methods:{handleChange:function(t,e,o){console.log(t,e,o),this.form.roleIdList=t},handleSave:function(){var t=this,e=this.form.positionId,o={body:this.$lodash.pick(this.form,"positionId","name","description","status","roleIdList"),next:"system-position-list"};console.log(o);var n=this.$api.PositionController;this.loading=!0,this.$invokeSave(o,"positionId",n.add,n.modify,function(o){t.loading=!1,o&&o.body&&(console.log(o.body),e||(t.form.positionId=o.body))}).catch(function(e){t.loading=!1})},loadRoles:function(){var t=this;this.$api.RoleController.page({body:{size:1e4,current:1,filters:[{property:"status",operator:"eq",value:!0}]}},function(e){e.body&&(console.log(e.body),t.transfer.list=e.body.records)})}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"position-detail"},[o("xv-detail",[o("div",{staticClass:"position-detail__title"},[t._v("职位详情信息")]),t._v(" "),o("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"职位名称",prop:"name",required:""}},[o("el-input",{attrs:{placeholder:"请输入不超过32个字符的职位名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"职位描述",prop:"description"}},[o("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入不超过100个字符的职位描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"==typeof e?e.trim():e)},expression:"form.description"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"选择角色",prop:"roleIdList"}},[o("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{props:{key:"roleId",label:"name"},"render-content":t.transfer.render,titles:["待选列表","已选列表"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:t.transfer.list},on:{change:t.handleChange},model:{value:t.form.roleIdList,callback:function(e){t.$set(t.form,"roleIdList",e)},expression:"form.roleIdList"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"职位状态"}},[o("el-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),t._v(" "),o("div",{attrs:{slot:"button"},slot:"button"},[o("xv-button-save",{attrs:{name:"保存"},on:{click:function(e){return t.$handleFormValidate("form",t.handleSave)}}}),t._v(" "),o("xv-button-return",{attrs:{name:"取消"},on:{click:function(e){return t.link("system-position-list")}}})],1)],1)],1)},staticRenderFns:[]};var i=o("VU/8")(n,r,!1,function(t){o("jfdA")},null,null);e.default=i.exports},jfdA:function(t,e){}});