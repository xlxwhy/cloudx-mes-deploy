webpackJsonp([15,0,3,6,7,47,59,63,153,169,209],{"1mxC":function(t,e){},"2KUU":function(t,e){},"8kb7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-cell"},[this.title?e("div",{staticClass:"form-cell--title"},[this._v(this._s(this.title))]):this._e(),this._v(" "),e("div",{staticClass:"form-cell--content"},[this._t("default")],2)])},staticRenderFns:[]};var r=n("VU/8")({name:"formCell",props:["title"]},i,!1,function(t){n("YVFp")},"data-v-23c537e4",null);e.default=r.exports},"9akS":function(t,e){},"9tok":function(t,e){},AOMp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("cm2o"),r=n("XPjG"),a={components:{Popover:i.default,SetConditionDialog:r.default},props:{form:Object,rules:Object,disabled:Boolean,sence:Array,day:Number},data:function(){return{list:[],editIndex:-1,dialogVisible:!1,conditionValue:[],buyConditions:[{label:"人车关系认证",val:"carOwner"},{label:"身份证认证",val:"hasIdCertified"},{label:"驾驶证认证",val:"hasDriverLicence"},{label:"机动车识别认证",val:"hasCarCertificate"},{label:"购车订单认证",val:"hasCarOrder"}]}},methods:{getSenceStatus:function(t){return t.filter(function(t){return t.opened}).length},getCondition:function(t){var e=this,n=[],i=function(i){if(t[i]){var r=e.buyConditions.find(function(t){return t.val==i});n.push(r.label)}};for(var r in t)i(r);return n},changeCondition:function(t){console.log(this.editIndex,t);var e={};this.buyConditions.forEach(function(n,i){t.indexOf(i)>=0&&(e[n.val]=!0)}),this.form.list[this.editIndex].buyConditions=e},changeBatch:function(t,e){var n=this;console.log(t,e),this.sence.forEach(function(i,r){i.opened&&(n.form.list[e]["senceStock"+r]=t)}),this.validateRowFile(e)},changeAllStock:function(t,e){this.validateRowFile(e)},getRule:function(t,e,n){var i=this;return[{required:!0,validator:function(n,r,a){i.$nextTick(function(n){var s=i.sence,o=i.form.list,l=i.day,c=0;return s.forEach(function(t,n){t.opened&&(c+=Number(o[e]["senceStock"+n]||0))}),l>0&&(c*=l),""===r||void 0===r||r&&!/^\d+$/.test(r)?a(new Error("请设置库存")):c>t.stock?a(new Error("活动的库存不能超过总库存")):void a()})},trigger:["blur"]}]},set:function(t,e){var n=this;this.$set(this,"conditionValue",[]);var i=function(e){if(t.buyConditions[e]){var i=n.buyConditions.findIndex(function(t){return t.val==e});-1==n.conditionValue.indexOf(i)&&n.conditionValue.push(i)}};for(var r in t.buyConditions)i(r);console.log(t,this.conditionValue),this.editIndex=e,this.dialogVisible=!0},cannelTop:function(){this.$confirm("是否取消该商品置顶?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(t){})},top:function(){this.$confirm("是否将该商品置顶?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(t){})},del:function(t){var e=this;this.$confirm("是否将该商品移除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.form.list.splice(t,1)}).catch(function(t){})},validatorFiles:function(t){var e=this.sence;this.form.list.forEach(function(n,i){e.forEach(function(e,n){if(e.opened){var r="list."+i+".senceStock"+n;t.validateField(r)}})})},validateRowFile:function(t){var e=this;this.sence.forEach(function(n,i){if(n.opened){var r="list."+t+".senceStock"+i;e.$parent.$parent.$parent.$refs.ruleForm.validateField(r)}})}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"seckill-list"},[n("el-table",{staticClass:"seckill-list-table",attrs:{data:t.form.list,border:""}},[n("el-table-column",{attrs:{prop:"goodsId",label:"商品ID",align:"center",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",align:"center","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"info flex"},[n("div",{staticClass:"img flex justify-content-center align-items-center"},[n("img",{attrs:{src:t.$image(e.row.goodsImageUrl)}})]),t._v(" "),n("div",{staticClass:"txt col"},[t._v("\n                        "+t._s(e.row.goodsName)+"\n                    ")])])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"120"},scopedSlots:t._u([{key:"header",fn:function(t){return[n("popover",{attrs:{placement:"top-start",title:"商品价格",head:"商品价格",content:"商品上架时设置的价格，秒杀库存为0或者秒杀结束后商品的销售价格。"}})]}},{key:"default",fn:function(e){return[t._v("\n                ￥"+t._s(e.row.price)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"seckillPrice",align:"center",width:"130"},scopedSlots:t._u([{key:"header",fn:function(t){return[n("popover",{attrs:{placement:"top-start",title:"秒杀价格",head:"秒杀价格",content:"秒杀活动中，用户购买商品的价格。"}})]}},{key:"default",fn:function(e){return[n("el-form-item",{attrs:{prop:"list."+e.$index+".seckillPrice",rules:t.$rule.price("价格",.01,e.row.price,!0,function(){return e.row.seckillPrice}),"label-width":"auto"}},[n("el-input",{staticClass:"prepend-txt",attrs:{disabled:t.disabled,placeholder:"价格",type:"age",maxlength:"8"},model:{value:e.row.seckillPrice,callback:function(n){t.$set(e.row,"seckillPrice","string"==typeof n?n.trim():n)},expression:"scope.row.seckillPrice"}},[n("template",{slot:"prepend"},[t._v("￥")])],2)],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"stock",align:"center",width:"110"},scopedSlots:t._u([{key:"header",fn:function(t){return[n("popover",{attrs:{placement:"top-start",title:"总库存限制",head:"总库存限制",content:"在本次秒杀活动中，商品的秒杀总库存，不是每天的库存数。(∑场次库存*h活动天数)<=秒杀库存"}})]}},{key:"default",fn:function(e){return[n("el-form-item",{attrs:{prop:"list."+e.$index+".stock",rules:t.$rule.quantity("总库存",null,999999,!0,function(){return e.row.stock}),"label-width":"auto"}},[n("el-input",{staticClass:"input-txt",attrs:{disabled:t.disabled,placeholder:"总库存"},on:{input:function(n){return t.changeAllStock(n,e.$index)}},model:{value:e.row.stock,callback:function(n){t.$set(e.row,"stock","string"==typeof n?n.trim():n)},expression:"scope.row.stock"}})],1)]}}])}),t._v(" "),t.getSenceStatus(t.sence)&&!t.disabled?n("el-table-column",{attrs:{prop:"stock",align:"center",width:"110"},scopedSlots:t._u([{key:"header",fn:function(t){return[n("popover",{attrs:{placement:"top-start",title:"批量设置",head:"批量设置",content:"输入数量，点击设置，可以批量设置所有场次的秒杀库存。"}})]}},{key:"default",fn:function(e){return[n("el-form-item",{attrs:{"label-width":"auto"}},[n("el-input",{staticClass:"input-txt",attrs:{disabled:t.disabled,placeholder:"批量"},on:{input:function(n){return t.changeBatch(n,e.$index)}},model:{value:e.row.batch,callback:function(n){t.$set(e.row,"batch",t._n(n))},expression:"scope.row.batch"}})],1)]}}],null,!1,2608735469)}):t._e(),t._v(" "),t._l(t.sence,function(e,i){return e.opened?n("el-table-column",{key:e.label,attrs:{align:"center",width:"110"},scopedSlots:t._u([{key:"header",fn:function(i){return[t._v("\n                "+t._s(e.label)+"库存"),n("br"),t._v(t._s(e.time)+"\n            ")]}},{key:"default",fn:function(e){return[n("el-form-item",{attrs:{prop:"list."+e.$index+".senceStock"+i,rules:t.getRule(e.row,e.$index,i),"label-width":"auto"}},[n("el-input",{staticClass:"input-txt",attrs:{disabled:t.disabled,placeholder:"库存"},model:{value:e.row["senceStock"+i],callback:function(n){t.$set(e.row,"senceStock"+i,"string"==typeof n?n.trim():n)},expression:"scope.row['senceStock'+index]"}})],1)]}}],null,!0)}):t._e()}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"120"},scopedSlots:t._u([{key:"header",fn:function(t){return[n("popover",{attrs:{placement:"top-start",title:"秒杀条件",head:"参加秒杀条件",content:"输入数量，点击设置，可以一次性设置该商品所有场次的秒杀库存。如果商品有设置购买条件自动带出。"}})]}},{key:"default",fn:function(e){return t._l(t.getCondition(e.row.buyConditions),function(e,i){return n("p",{key:i},[t._v(t._s(e))])})}}])}),t._v(" "),t.disabled?t._e():n("el-table-column",{attrs:{align:"center",width:"120",fixed:"right"},scopedSlots:t._u([{key:"header",fn:function(t){return[n("popover",{attrs:{placement:"top-start",title:"操作",head:"操作",content:"点击条件设置，设置用户购买秒杀商品的条件。"}})]}},{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.set(e.row,e.$index)}}},[t._v("条件设置")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.del(e.$index)}}},[t._v("删除")])]}}],null,!1,1882932620)})],2),t._v(" "),n("set-condition-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},change:t.changeCondition},model:{value:t.conditionValue,callback:function(e){t.conditionValue=e},expression:"conditionValue"}})],1)},staticRenderFns:[]};var o=n("VU/8")(a,s,!1,function(t){n("Bi1x"),n("1mxC")},"data-v-3b6db045",null);e.default=o.exports},Bi1x:function(t,e){},MGsi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),r=n.n(i),a=n("exGp"),s=n.n(a),o=n("woOf"),l=n.n(o),c=n("Gu7T"),u=n.n(c),d=(n("OBrr"),{props:{status:{type:[Number,String],default:4},defaultValue:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,table:{filters:[],query:{key:"goodsId",keyword:""},sort:{descs:["updateTime"]},page:{current:1,size:10,total:0}},defaultSelectGoodsId:this.defaultValue}},watch:{defaultValue:{handler:function(t,e){this.defaultSelectGoodsId=[].concat(u()(t)),this.setDefalutRow()},deep:!0}},mounted:function(){this.loadTable()},methods:{getQueryParam:function(){var t=this.table.query,e=t.key,n=t.keyword,i=this.$gtmc.assemblePage(this.table);return this.$gtmc.appendFilter(i.body.filters,"status","eq",this.status),e&&n&&this.$gtmc.appendFilter(i.body.filters,e,"like",n),i},handleQuery:function(){this.loadTable()},handleQueryClean:function(){this.table.query.key="goodsId",this.loadTable()},cleanQuery:function(){l()(this.$data,this.$options.data.call(this)),this.loadTable()},handlePageChange:function(t,e){this.loadTable(null,t,e)},loadTable:function(t,e,n){var i=this;return s()(r.a.mark(function t(){var e,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.getQueryParam(),i.loading=!0,t.next=4,i.$api.GoodsController.pagePartsGoods(e);case 4:n=t.sent,i.$gtmc.assembleBody(i.table.page,n.body),setTimeout(function(t){i.setDefalutRow()},100),i.loading=!1;case 8:case"end":return t.stop()}},t,i)}))()},handleSelectionChange:function(t){this.$emit("change",t)},clearSelection:function(){this.$refs.table.$refs.table.clearSelection()},setDefalutRow:function(){var t=this,e=this.defaultSelectGoodsId,n=this.table.page.records;if(!e.length)return!1;n.forEach(function(i,r){e.indexOf(i.goodsId)>=0&&t.$refs.table.$refs.table.toggleRowSelection(n[r],!0)})}},filters:{getStatusType:function(t){return{0:"info",1:"warning",2:"warning",3:"warning",4:"success",5:"danger",6:"danger",7:"danger"}[t]},getStatusTxt:function(t){return{0:"未知",1:"待提交",2:"待业务担当审核",3:"待商城运营担当审核",4:"已上架",5:"审核不通过",6:"审核不通过",7:"已下架"}[t]}}}),f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select-goods"},[n("div",{staticClass:"xv-list-query"},[n("xv-field-select",{attrs:{entity:t.table.query,name:"key",placeholder:"选择查询类型",options:{values:[{label:"商品ID",value:"goodsId"},{label:"商品名称",value:"goodsName"}]}}}),t._v(" "),n("xv-field-input",{attrs:{entity:t.table.query,name:"keyword",placeholder:"输入搜索关键字"},on:{done:function(e){return t.$handleInputQuery()}}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.loadTable}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:t.cleanQuery}},[t._v("清除查询条件")])],1),t._v(" "),n("div",{staticClass:"select-goods__content"},[n("xv-list-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{"margin-top":"20px"},attrs:{table:t.table,height:"400"},on:{"sort-change":t.handleQuery,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsId",label:"商品ID",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"商品价格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    ￥"+t._s(e.row.price)+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"发布状态",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t._f("getStatusType")(e.row.status)}},[t._v(t._s(t._f("getStatusTxt")(e.row.status)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",align:"center"}})],1),t._v(" "),n("xv-list-page",{attrs:{table:t.table},on:{change:t.handleQuery}})],1)])},staticRenderFns:[]};var h=n("VU/8")(d,f,!1,function(t){n("koAj")},"data-v-7302444a",null);e.default=h.exports},NEHW:function(t,e,n){"use strict";var i=/([yMdhsm])(\1*)/g;function r(t,e){e-=(t+"").length;for(var n=0;n<e;n++)t="0"+t;return t}e.a={toFixed:function(t,e){return Number(t).toFixed(e||0)},dhmsTomss:function(t){return{days:parseInt(t/864e5),hours:parseInt(t%864e5/36e5),minutes:parseInt(t%36e5/6e4),seconds:t%6e4/1e3}},mssToDhms:function(t,e,n,i){return 1e3*(60*(60*(24*t+e)+n)+i)},dhmsToss:function(t){return{days:parseInt(t/86400),hours:parseInt(t%86400/3600),minutes:parseInt(t%3600/60),seconds:t%60}},ssToDhms:function(t,e,n,i){return 60*(60*(24*t+e)+n)+i},pushDateRange:function(t,e,n){if(e[0]||e[1]){var i=this.formatDate.format(e[0],"yyyy/MM/dd hh:mm:ss"),r=this.formatDate.format(e[1],"yyyy/MM/dd")+" 23:59:59";n.push({property:t,operator:"ge",value:i}),n.push({property:t,operator:"le",value:r})}},formatMoney:function(t){var e=String(t);return(e=(e=(e=(e=e.replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e},getQueryStringByName:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.href.match(e),i="";return null!=n&&(i=n[2]),e=null,n=null,null==i||""==i||"undefined"==i?"":i},formatDate:{format:function(t,e){return(e=e||"yyyy-MM-dd").replace(i,function(e){switch(e.charAt(0)){case"y":return r(t.getFullYear(),e.length);case"M":return r(t.getMonth()+1,e.length);case"d":return r(t.getDate(),e.length);case"w":return t.getDay()+1;case"h":return r(t.getHours(),e.length);case"m":return r(t.getMinutes(),e.length);case"s":return r(t.getSeconds(),e.length)}})},parse:function(t,e){var n=e.match(i),r=t.match(/(\d)+/g);if(n.length==r.length){for(var a=new Date(1970,0,1),s=0;s<n.length;s++){var o=parseInt(r[s]);switch(n[s].charAt(0)){case"y":a.setFullYear(o);break;case"M":a.setMonth(o-1);break;case"d":a.setDate(o);break;case"h":a.setHours(o);break;case"m":a.setMinutes(o);break;case"s":a.setSeconds(o)}}return a}return null}},checkPrice:function(t){return/((^[1-9]\d*)|^0)(\.\d{0,2}){0,1}$/.test(t)&&t>0}}},OdD2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),r=n.n(i),a=n("exGp"),s=n.n(a),o=n("woOf"),l=n.n(o),c=n("Gu7T"),u=n.n(c),d={props:{status:{type:Number,default:4},defaultValue:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,table:{filters:[],query:{key:"goodsId",keyword:""},sort:{descs:["updateTime"]},page:{current:1,size:10,total:0}},defaultSelectGoodsId:this.defaultValue}},watch:{defaultValue:{handler:function(t,e){this.defaultSelectGoodsId=[].concat(u()(t)),this.setDefalutRow()},deep:!0}},mounted:function(){this.loadTable()},methods:{getQueryParam:function(){var t=this.table.query,e=t.key,n=t.keyword;this.table.filters=[];var i=this.$gtmc.assemblePage(this.table);return this.$gtmc.appendFilter(i.body.filters,"status","eq",this.status),e&&n&&this.$gtmc.appendFilter(i.body.filters,e,"like",n),i},handleQuery:function(){this.loadTable()},handleQueryClean:function(){this.table.query.key="goodsId",this.loadTable()},handlePageChange:function(t,e){this.loadTable(null,t,e)},cleanQuery:function(){l()(this.$data,this.$options.data.call(this)),this.loadTable()},loadTable:function(t,e,n){var i=this;return s()(r.a.mark(function t(){var e,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.getQueryParam(),i.loading=!0,t.next=4,i.$api.GoodsController.pageVirtualGoods(e);case 4:n=t.sent,i.$gtmc.assembleBody(i.table.page,n.body),setTimeout(function(t){i.setDefalutRow()},100),i.loading=!1;case 8:case"end":return t.stop()}},t,i)}))()},handleSelectionChange:function(t){this.$emit("change",t)},clearSelection:function(){this.$refs.table.$refs.table.clearSelection()},setDefalutRow:function(){var t=this,e=this.defaultSelectGoodsId,n=this.table.page.records;if(!e.length)return!1;n.forEach(function(i,r){e.indexOf(i.goodsId)>=0&&t.$refs.table.$refs.table.toggleRowSelection(n[r],!0)})}},filters:{getStatusType:function(t){return{0:"info",1:"warning",2:"warning",3:"warning",4:"success",5:"danger",6:"danger",7:"danger"}[t]},getStatusTxt:function(t){return{0:"未知",1:"待提交",2:"待业务担当审核",3:"待商城运营担当审核",4:"已上架",5:"审核不通过",6:"审核不通过",7:"已下架"}[t]}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select-goods"},[n("div",{staticClass:"xv-list-query"},[n("xv-field-select",{attrs:{entity:t.table.query,name:"key",placeholder:"选择查询类型",options:{values:[{label:"商品ID",value:"goodsId"},{label:"商品名称",value:"goodsName"}]}}}),t._v(" "),n("xv-field-input",{attrs:{entity:t.table.query,name:"keyword",placeholder:"输入搜索关键字"},on:{done:function(e){return t.$handleInputQuery()}}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.loadTable}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:t.cleanQuery}},[t._v("清除查询条件")])],1),t._v(" "),n("div",{staticClass:"select-goods__content"},[n("xv-list-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{"margin-top":"20px"},attrs:{table:t.table,height:"400"},on:{"sort-change":t.handleQuery,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsId",label:"商品ID",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"商品价格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    ￥"+t._s(e.row.price)+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"发布状态",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t._f("getStatusType")(e.row.status)}},[t._v(t._s(t._f("getStatusTxt")(e.row.status)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",align:"center"}})],1),t._v(" "),n("xv-list-page",{attrs:{table:t.table},on:{change:t.handleQuery}})],1)])},staticRenderFns:[]};var h=n("VU/8")(d,f,!1,function(t){n("2KUU")},"data-v-0aa3f137",null);e.default=h.exports},P0GK:function(t,e){},SVAw:function(t,e){},SldL:function(t,e){!function(e){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",c="object"==typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{(u=e.regeneratorRuntime=c?t.exports:{}).wrap=k;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",v={},m={};m[s]=function(){return this};var g=Object.getPrototypeOf,b=g&&g(g(V([])));b&&b!==i&&r.call(b,s)&&(m=b);var y=$.prototype=w.prototype=Object.create(m);x.prototype=y.constructor=$,$.constructor=x,$[l]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(y),t},u.awrap=function(t){return{__await:t}},S(C.prototype),C.prototype[o]=function(){return this},u.AsyncIterator=C,u.async=function(t,e,n,i){var r=new C(k(t,e,n,i));return u.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},S(y),y[l]="Generator",y[s]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=V,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return o.type="throw",o.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:V(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),v}}}function k(t,e,n,i){var r=e&&e.prototype instanceof w?e:w,a=Object.create(r.prototype),s=new T(i||[]);return a._invoke=function(t,e,n){var i=d;return function(r,a){if(i===h)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw a;return E()}for(n.method=r,n.arg=a;;){var s=n.delegate;if(s){var o=L(s,n);if(o){if(o===v)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var l=_(t,e,n);if("normal"===l.type){if(i=n.done?p:f,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(t,n,s),a}function _(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function x(){}function $(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(t){var e;this._invoke=function(n,i){function a(){return new Promise(function(e,a){!function e(n,i,a,s){var o=_(t[n],t,i);if("throw"!==o.type){var l=o.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,a,s)},function(t){e("throw",t,a,s)}):Promise.resolve(c).then(function(t){l.value=t,a(l)},s)}s(o.arg)}(n,i,e,a)})}return e=e?e.then(a,a):a()}}function L(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,L(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=_(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,v;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function V(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:E}}function E(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},X0fl:function(t,e){},XPjG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={props:{visible:Boolean,value:Array},data:function(){return{data:function(t){var e=[];return["人车关系认证","身份证认证","驾驶证认证","机动车识别认证","购车订单认证"].forEach(function(t,n){e.push({key:n,label:t})}),e}(),defaultValue:this.value}},watch:{value:{handler:function(t,e){console.log("defaultValue++++",t),this.$set(this,"defaultValue",t)},deep:!0}},methods:{submitHandle:function(){this.$emit("input",this.defaultValue),this.$emit("update:visible",!1),this.$emit("change",this.defaultValue),this.$refs.transfer.leftChecked.splice(0,this.$refs.transfer.leftChecked.length),this.$refs.transfer.rightChecked.splice(0,this.$refs.transfer.rightChecked.length)},closeHandle:function(){this.$emit("update:visible",!1),this.$set(this,"defaultValue",[]),this.$refs.transfer.leftChecked.splice(0,this.$refs.transfer.leftChecked.length),this.$refs.transfer.rightChecked.splice(0,this.$refs.transfer.rightChecked.length)}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"condition-dialog"},[n("el-dialog",{attrs:{title:"条件设置",visible:t.visible,width:"600px","close-on-click-modal":!1,"show-close":!1,center:"","append-to-body":""},on:{"update:visible":function(e){t.visible=e}}},[n("div",{staticClass:"flex justify-content-center"},[n("el-transfer",{ref:"transfer",attrs:{data:t.data,titles:["不需条件项","需要条件项"]},model:{value:t.defaultValue,callback:function(e){t.defaultValue=e},expression:"defaultValue"}})],1),t._v(" "),n("div",{staticClass:"dialog-footer flex justify-content-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"large"},on:{click:t.closeHandle}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{size:"large",type:"primary"},on:{click:t.submitHandle}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var a=n("VU/8")(i,r,!1,function(t){n("9tok")},"data-v-5d4de374",null);e.default=a.exports},Xxa5:function(t,e,n){t.exports=n("jyFz")},YVFp:function(t,e){},cm2o:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={props:{title:String,width:{type:Number,default:200},content:String,head:String,trigger:{type:String,default:"hover"}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-popover",{attrs:{placement:"top-start",title:this.title,width:this.width,trigger:this.trigger,content:this.content}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("span",{domProps:{innerHTML:this._s(this.head)}}),e("i",{staticClass:"el-icon-question"})])])},staticRenderFns:[]},a=n("VU/8")(i,r,!1,null,null,null);e.default=a.exports},e9Hb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"goods-audit flex column align-items-center"},[t._m(0),t._v(" "),n("div",{staticClass:"goods-audit--tip"},[t._v("\n        您可以 \n        "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:t.toList}},[t._v("返回秒杀列表")]),t._v("\n        查看状态。\n    ")],1),t._v(" "),n("div",{staticClass:"goods-audit--foot"},[n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"large"},on:{click:t.toList}},[t._v("返回秒杀列表")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"goods-audit--head flex align-items-center"},[e("i",{staticClass:"el-icon-success icon-plus"}),this._v(" "),e("div",{staticClass:"txt"},[e("p",[this._v("恭喜您，秒杀已提交成功！")]),this._v(" "),e("p",[this._v("请关注审核结果。")])])])}]};var r=n("VU/8")({data:function(){return{}},methods:{toList:function(){this.$closeTagView(),this.$router.push({name:"promote-seckill-list"})}}},i,!1,function(t){n("9akS")},"data-v-4b425eb5",null);e.default=r.exports},exGp:function(t,e,n){"use strict";e.__esModule=!0;var i,r=n("//Fk"),a=(i=r)&&i.__esModule?i:{default:i};e.default=function(t){return function(){var e=t.apply(this,arguments);return new a.default(function(t,n){return function i(r,s){try{var o=e[r](s),l=o.value}catch(t){return void n(t)}if(!o.done)return a.default.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}("next")})}}},exWB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),r=n.n(i),a=n("exGp"),s=n.n(a),o={props:{visible:Boolean,value:{type:String,default:""}},data:function(){return{loading:!1,form:{remark:this.value}}},methods:{submit:function(){var t,e=this;this.$refs.form.validate((t=s()(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:e.$emit("change",e.form.remark),e.$emit("update:visible",!1);case 4:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},cannel:function(){this.$emit("update:visible",!1),this.$refs.form.resetFields()}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"remack"},[n("el-dialog",{attrs:{title:"提示",visible:t.visible,width:"600px","close-on-click-modal":!1,"show-close":!1,center:"","append-to-body":""},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"不通过审核备注",prop:"remark",rules:[{required:!0,message:"审核备注不能为空"}]}},[n("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer flex justify-content-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"large"},on:{click:t.cannel}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{size:"large",type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(o,l,!1,function(t){n("X0fl")},"data-v-00167be2",null);e.default=c.exports},jyFz:function(t,e,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,a=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n("SldL"),r)i.regeneratorRuntime=a;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},koAj:function(t,e){},lqB5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Gu7T"),r=n.n(i),a=n("MGsi"),s=n("OdD2"),o={components:{PartsList:a.default,VirtualList:s.default},props:{visible:Boolean,virtaulShow:{type:Boolean,default:!0},PartsShow:{type:Boolean,default:!0},status:{type:[Number,String],value:4},defaultValue:{type:Array,default:function(){return[]}}},data:function(){return{activeName:this.PartsShow?"parts":"virtual",tabNav:[{label:"零配件商品",value:1},{label:"虚拟商品",value:2}],selectPartsList:[],selectVirtualList:[]}},methods:{save:function(){var t=this.selectPartsList,e=this.selectVirtualList,n=[].concat(r()(t),r()(e));if(!n.length)return this.$message.warning("请至少选入一项商品");this.$emit("change",n),this.close(),this.$set(this,"selectPartsList",[]),this.$set(this,"selectVirtualList",[])},close:function(){this.$refs.partsList&&this.$refs.partsList.clearSelection(),this.$refs.virtualList&&this.$refs.virtualList.clearSelection(),this.$emit("update:visible",!1)},selectPartsChange:function(t){this.$set(this,"selectPartsList",t)},selectVirtualChange:function(t){this.$set(this,"selectVirtualList",t)}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"选择商品",visible:t.visible,width:"1000px",top:"20px","append-to-body":"","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e}}},[n("div",{staticClass:"select-goods"},[n("el-tabs",{staticClass:"parts-tab-nav",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.PartsShow?n("el-tab-pane",{attrs:{label:"零配件商品",name:"parts"}},[n("parts-list",{ref:"partsList",attrs:{status:t.status,"default-value":t.defaultValue},on:{change:t.selectPartsChange}})],1):t._e(),t._v(" "),t.virtaulShow?n("el-tab-pane",{attrs:{label:"虚拟商品",name:"virtual"}},[n("virtual-list",{ref:"virtualList",attrs:{status:t.status,"default-value":t.defaultValue},on:{change:t.selectVirtualChange}})],1):t._e()],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer flex justify-content-center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"large"},on:{click:t.close}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{size:"large",type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)])},staticRenderFns:[]};var c=n("VU/8")(o,l,!1,function(t){n("vf3P")},"data-v-6e6b78ba",null);e.default=c.exports},rm9e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("d7EF"),r=n.n(i),a=n("fZjL"),s=n.n(a),o=n("mvHQ"),l=n.n(o),c=n("Xxa5"),u=n.n(c),d=n("exGp"),f=n.n(d),h=n("8kb7"),p=n("whND"),v=n("lqB5"),m=n("exWB"),g=n("AOMp"),b=n("e9Hb"),y=n("NEHW"),k=[{label:"第1场",time:"(10:00-12:00)",hints:"",opened:!0},{label:"第2场",time:"(12:00-14:00)",hints:"",opened:!0},{label:"第3场",time:"(14:00-16:00)",hints:"",opened:!0},{label:"第4场",time:"(16:00-18:00)",hints:"",opened:!0},{label:"第5场",time:"(18:00-20:00)",hints:"",opened:!0}],_={components:{FormCell:h.default,DetailAudit:b.default,XvSteps:p.default,DetailSeckillList:g.default,XvSelectGoods:v.default,XvReviewDialog:m.default},data:function(){var t=this;return{loading:!1,isDetailAudit:!1,stepActive:0,steps:["填写秒杀详情","待业务担当审核","待商城运营担当审核","审核通过，发布成功"],isEdit:!1,isLook:!1,isAudit:!1,detailInfo:null,days:0,pickerOptions:{disabledDate:function(t){return t.getTime()<new Date/1-864e5}},form:{seckillName:"",time:"",limitQuantity:1,senceList:[],list:[]},rules:{seckillName:this.$rule.name("秒杀名称",null,32),time:[{required:!0,message:"设置秒杀日期",trigger:"change"}],limitQuantity:this.$rule.price("限购",1,999999,!0,function(){return t.form.limitQuantity}),hints:this.$rule.name("活动提示",null,16)},conditionCheck:[],buyConditions:[{label:"人车关系认证",val:"carOwner"},{label:"身份证认证",val:"hasIdCertified"},{label:"驾驶证认证",val:"hasDriverLicence"},{label:"机动车识别认证",val:"hasCarCertificate"},{label:"购车订单认证",val:"hasCarOrder"}],reviewDialogVisible:!1,remark:"",goodsDialogVisible:!1,goodsDefalueValue:[]}},computed:{isDisabled:function(){var t=this.$route.query,e=t.isLook,n=t.isAudit;return!(!e&&!n)},reviewLog:function(){if(!this.detailInfo)return 0;var t=this.detailInfo.reviewLogs;return t&&t[t.length-1]},status:function(){return this.detailInfo?this.detailInfo.status:0}},created:function(){var t=this;return f()(u.a.mark(function e(){var n,i,r,a,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$route.query,i=n.isEdit,r=n.isLook,a=n.isAudit,s=n.seckillId,t.isEdit=i,t.isLook=r,t.isAudit=a,t.loading=!0,e.next=7,t.getRule();case 7:if(!(i||r||a)){e.next=12;break}if(s){e.next=10;break}return e.abrupt("return",t.$message.error("缺少seckillId参数"));case 10:return e.next=12,t.getDetail();case 12:t.loading=!1;case 13:case"end":return e.stop()}},e,t)}))()},methods:{getRule:function(){var t=this;return f()(u.a.mark(function e(){var n,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.SeckillSettingController.get();case 2:return n=e.sent,i=k,n.body&&n.body.roundDetails&&(i=n.body.roundDetails.map(function(e,n){var i=e.beginTimeHour,r=e.beginTimeMin,a=e.endTimeHour,s=e.endTimeMin,o={hints:"",opened:!0};return o.label="第"+(n+1)+"场",o.time="("+t.paddingNumber(i)+":"+t.paddingNumber(r)+"-"+t.paddingNumber(a)+":"+t.paddingNumber(s)+")",o})),t.form.senceList=JSON.parse(l()(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}},e,t)}))()},getDetail:function(){var t=this;return f()(u.a.mark(function e(){var n,i,r,a,s,o,l,c,d,f,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$route.query,n.isAudit,i=n.seckillId,e.next=3,t.$api.SeckillController.get({path:{seckillId:i}});case 3:return r=e.sent,a=r.body,s=a.seckillBeginDate,o=a.seckillEndDate,l=a.seckillName,c=a.limitQuantity,d=a.seckillGoodsDetails,f=a.seckillSessions,t.form.time=[s,o],t.form.seckillName=l,t.form.limitQuantity=c,t.getStep(r.body.status),f.forEach(function(e,n){t.$set(t.form.senceList[n],"hints",e.hints),t.$set(t.form.senceList[n],"opened",e.opened)}),d&&d.length&&(t.form.list=d.map(function(e){var n=0;return f.forEach(function(i,r){i.opened?(t.$set(e,"senceStock"+r,e.roundStocks[n]),++n):t.$set(e,"senceStock"+r,"")}),e})),h=new Date(new Date(o)/1-new Date(s)/1),t.days=Math.ceil(h/24/60/60/1e3),t.detailInfo=r.body,console.log("this.form++++",t.form),e.abrupt("return",r.body);case 16:case"end":return e.stop()}},e,t)}))()},getStep:function(t){var e={20000:3,30000:0,40000:1,50000:2,50001:1,50002:3,50003:2,50004:4}[t];"50001"==t?(this.steps=this.steps.slice(0,1),this.steps.push("业务担当审核不通过")):"50003"==t?(this.steps=this.steps.slice(0,2),this.steps.push("商城运营担当不通过")):"50004"==t&&(this.steps=this.steps.slice(0,4),this.steps.push("秒杀下架")),this.stepActive=e},handleConditionChange:function(t){console.log(t)},onSubmit:function(){this.submitHandle("add")},save:function(){this.submitHandle("modify")},cannel:function(){var t=this;this.$confirm("确认取消当前操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$closeTagView(),t.$router.go(-1)}).catch(function(t){})},submitHandle:function(t){var e,n=this;this.$refs.ruleForm.validate((e=f()(u.a.mark(function e(i,r){var a,o,c,d,f,h,p,v,m,g,b;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=5;break}return a=s()(r),o=r[a[0]][0].message,n.$message.warning(o),e.abrupt("return",console.log(o));case 5:if(c=n.form,d=n.detailInfo,f=n.isEdit,h=n.isAudit,(p=JSON.parse(l()(c))).seckillBeginDate=p.time[0],p.seckillEndDate=p.time[1],(f||h)&&(p.seckillId=d.seckillId),p.action="add"===t?1:2,v=p.seckillBeginDate.slice(0,10),m=y.a.formatDate.format(new Date),!(new Date(v)/1<new Date(m)/1)){e.next=15;break}return e.abrupt("return",n.$message.warning("请设置正确的秒杀时间"));case 15:if(c.senceList.some(function(t){return t.opened})){e.next=17;break}return e.abrupt("return",n.$message.warning("至少选择一场活动"));case 17:if(p.list.length){e.next=19;break}return e.abrupt("return",n.$message.warning("请选入商品"));case 19:return p.seckillGoodsSimples=p.list.map(function(t){console.log(t);t.goodsId;var e={goodsId:t.goodsId,roundStocks:[]};return c.senceList.forEach(function(n,i){n.opened&&e.roundStocks.push(t["senceStock"+i])}),e.seckillPrice=t.seckillPrice,e.stock=t.stock,e.identityCond=t.buyConditions,e}),p.seckillSessions=c.senceList.map(function(t){return{hints:t.opened?t.hints:"",opened:t.opened}}),delete p.list,delete p.time,delete p.senceList,console.log(p),n.loading=!0,e.prev=26,e.next=29,n.$api.SeckillController[d?"modify":"add"]({body:p});case 29:g=e.sent,b={500:"基础服务不可用",501:"您设置当前秒杀时间已有活动了，请重新设置",502:"商品活动库存检验失败",503:"保存失败",504:"价格表保存失败",200:"操作成功"},200==g.body?(window.scrollTo(0,0),n.isDetailAudit=!0,n.stepActive=1):n.$message.error(b[g.body]),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(26),console.error(e.t0);case 37:n.loading=!1;case 38:case"end":return e.stop()}},e,n,[[26,34]])})),function(t,n){return e.apply(this,arguments)}))},changeDate:function(t){var e=this;return f()(u.a.mark(function n(){var i,a,s,o,l,c,d,f;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),i=e.detailInfo,a=e.isEdit,s=r()(t,2),o=s[0],l=s[1],c={seckillBeginDate:o,seckillEndDate:l},i&&i.seckillId&&a&&(c.seckillId=i.seckillId),n.prev=5,n.next=8,e.$api.SeckillController.validateData({query:c});case 8:if(n.sent.body){n.next=12;break}return e.form.time="",n.abrupt("return",e.$message.warning("您设置当前秒杀时间已有活动了，请重新设置"));case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(5),e.form.time="";case 17:e.validatorFile(),d=y.a.dhmsTomss(new Date(o)/1-new Date(l)/1),f=Math.abs(d.days),(Math.abs(d.hours)||Math.abs(d.minute)||Math.abs(d.seconds))&&(f+=1),console.log(d,t),e.days=f;case 23:case"end":return n.stop()}},n,e,[[5,14]])}))()},reviewRemark:function(t){var e=this.$route.query.status;this.remark=t;var n=void 0;n=4e4==e?50001:50003,this.reviewHandle(n)},auditPass:function(){var t=this;this.$confirm("确认审核通过吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=void 0;e=4e4==t.$route.query.status?5e4:50002,t.reviewHandle(e)}).catch(function(){})},auditFail:function(){this.reviewDialogVisible=!0},reviewHandle:function(t){var e=this;return f()(u.a.mark(function n(){var i,r,a,s,o,l;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.$route.query,r=i.seckillId,i.status,e.detailInfo,a=e.remark,s={reviewStatus:t,seckillId:r},50001!=t&&50003!=t||(s.reviewOpinion=a),console.log(s),e.loading=!0,n.prev=6,n.next=9,e.$api.SeckillController.review({body:s});case 9:o=n.sent,l={500:"活动基础服务异常",501:"活动未找到",502:"基础活动统计异常",503:"该时间段内有其他活动",504:"活动状态更新失败",505:"活动规则不存在",506:"活动规则缓存保存失败",507:"活动规则缓存保存失败",200:"正常处理"},200==o.body?(e.$closeTagView(),e.$router.replace({name:"promote-seckill-list"})):e.$message.error(l[o.body]),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(6),console.error(n.t0);case 17:e.loading=!1;case 18:case"end":return n.stop()}},n,e,[[6,14]])}))()},addGoods:function(){this.goodsDefalueValue=this.form.list.map(function(t){return t.goodsId}),console.log("this.goodsDefalueValue+++",this.goodsDefalueValue),this.goodsDialogVisible=!0},selectGoodsChange:function(t){var e=this;t.forEach(function(t){var n=e.form,i=n.senceList;if(!n.list.find(function(e){return e.goodsId==t.goodsId})){e.$set(t,"buyConditions",{carOwner:!1,hasCarCertificate:!1,hasCarOrder:!1,hasDriverLicence:!1,hasIdCertified:!1}),e.$set(t,"goodsImageUrl",t.mainMaterialPath),e.$set(t,"stock",""),i.forEach(function(n,i){e.$set(t,"senceStock"+i,"")}),e.form.list.push(t)}}),this.$message.success("添加成功"),console.log("list+++",this.form.list)},paddingNumber:function(t){return t<10?"0"+t:t},changeSwitch:function(){var t=this;this.$nextTick(function(e){t.validatorFile()})},validatorFile:function(){this.$refs.detailSeckill.validatorFiles(this.$refs.ruleForm)},toList:function(){this.$closeTagView(),this.$router.push({name:"promote-seckill-list"})}},filters:{getStatusType:function(t){return{20000:"success",30000:"warning",40000:"warning",50000:"warning",50002:"success",50003:"danger",50004:"danger",60000:"danger"}[t]},getStatusTxt:function(t){return{20000:"已上架",30000:"待提交",40000:"待业务担当审核",50000:"待商城运营担当审核",50001:"业务审核不通过",50002:"已上架",50003:"运营审核不通过",50004:"已下架",60000:"已删除"}[t]}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"maintain-detail page-container"},[n("div",{staticClass:"maintain-detail--step"},[n("xv-steps",{attrs:{steps:t.steps,active:t.stepActive}})],1),t._v(" "),t.isDetailAudit?t._e():n("div",{staticClass:"maintain-detail__content"},[n("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[n("form-cell",{attrs:{title:"秒杀基本信息"}},[n("el-form-item",{attrs:{label:"秒杀名称",prop:"seckillName"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{disabled:t.isDisabled,placeholder:"请输入秒杀名称，不超过32个字符",maxlength:"40"},model:{value:t.form.seckillName,callback:function(e){t.$set(t.form,"seckillName",e)},expression:"form.seckillName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"秒杀日期",prop:"time"}},[n("el-date-picker",{attrs:{"popper-class":"seckill-picker",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","unlink-panels":"",disabled:t.isDisabled,"picker-options":t.pickerOptions,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},on:{change:t.changeDate},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}}),t._v(" "),t.days&&t.isAudit?n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",size:"large"}},[t._v("\n\t\t\t\t\t\t共 "+t._s(t.days)+" 天\n\t\t\t\t\t")]):t._e()],1),t._v(" "),n("el-form-item",{attrs:{label:"秒杀场次"}},[n("ul",{staticClass:"scene-list"},t._l(t.form.senceList,function(e,i){return n("li",{key:i},[n("span",{staticClass:"on"},[t._v(t._s(e.label)+" "+t._s(e.time))]),t._v(" "),n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ddd","active-text":e.opened?"已开通":"未开通",disabled:t.isDisabled},on:{change:t.changeSwitch},model:{value:e.opened,callback:function(n){t.$set(e,"opened",n)},expression:"item.opened"}}),t._v(" "),e.opened?n("el-form-item",{attrs:{label:"活动提示",prop:"senceList."+i+".hints",rules:t.rules.hints}},[n("el-input",{staticStyle:{width:"300px"},attrs:{disabled:t.isDisabled,placeholder:"请输入活动提示，不超过16个字符",maxlength:"20"},model:{value:e.hints,callback:function(n){t.$set(e,"hints",n)},expression:"item.hints"}})],1):t._e()],1)}),0)]),t._v(" "),n("el-form-item",{attrs:{label:"单用户限购",prop:"limitQuantity"}},[n("div",{staticClass:"flex align-items-center"},[t._v("\n\t\t\t\t\t\t每人每种商品限购\n\t\t\t\t\t\t"),n("el-input-number",{staticStyle:{width:"120px",margin:"0 10px"},attrs:{disabled:t.isDisabled,"controls-position":"right",min:1,max:1e6},model:{value:t.form.limitQuantity,callback:function(e){t.$set(t.form,"limitQuantity",e)},expression:"form.limitQuantity"}}),t._v("\n\t\t\t\t\t\t件\n\t\t\t\t\t")],1)])],1),t._v(" "),n("form-cell",{attrs:{title:"秒杀商品设置"}},[t.isDisabled?t._e():n("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.addGoods}},[t._v("+ 添加商品")]),t._v(" "),n("detail-seckill-list",{ref:"detailSeckill",staticStyle:{"margin-top":"20px"},attrs:{form:t.form,rules:t.rules,sence:t.form.senceList,day:t.days,disabled:t.isDisabled}})],1)],1),t._v(" "),t.isLook&&t.detailInfo?n("form-cell",{attrs:{title:"审核信息"}},[n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"状态"}},[n("el-tag",{attrs:{type:t._f("getStatusType")(t.status)}},[t._v(t._s(t._f("getStatusTxt")(t.status)))])],1),t._v(" "),!t.reviewLog||50001!=t.status&&50003!=t.status?t._e():[n("el-form-item",{attrs:{label:"审核人"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.reviewLog.operator)+"\n\t\t\t\t\t")]),t._v(" "),n("el-form-item",{attrs:{label:"审核时间"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.reviewLog.createTime)+"\n\t\t\t\t\t")]),t._v(" "),2e4!=t.status?n("el-form-item",{attrs:{label:"说明"}},[n("el-input",{attrs:{type:"textarea",disabled:"",rows:"4"},model:{value:t.reviewLog.remark,callback:function(e){t.$set(t.reviewLog,"remark",e)},expression:"reviewLog.remark"}})],1):t._e()]],2)],1):t._e(),t._v(" "),n("div",{staticClass:"car-detail--btn flex justify-content-center",staticStyle:{padding:"20px 0"}},[t.isLook||t.isAudit?t._e():[n("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.onSubmit}},[t._v("提交审核")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"large",plain:""},on:{click:t.save}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{size:"large"},on:{click:t.cannel}},[t._v("取消")])],t._v(" "),t.isAudit?[n("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.auditPass}},[t._v("审核通过")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"large",plain:""},on:{click:t.auditFail}},[t._v("审核不通过")]),t._v(" "),n("el-button",{attrs:{size:"large"},on:{click:t.toList}},[t._v("暂不处理")])]:t._e(),t._v(" "),t.isLook?[n("el-button",{attrs:{type:"primary",size:"large",plain:""},on:{click:t.toList}},[t._v("返回列表")])]:t._e()],2)],1),t._v(" "),t.isDetailAudit?n("div",{staticClass:"auditing"},[n("detail-audit")],1):t._e(),t._v(" "),n("xv-select-goods",{attrs:{visible:t.goodsDialogVisible,"default-value":t.goodsDefalueValue},on:{"update:visible":function(e){t.goodsDialogVisible=e},change:t.selectGoodsChange}}),t._v(" "),n("xv-review-dialog",{attrs:{visible:t.reviewDialogVisible},on:{"update:visible":function(e){t.reviewDialogVisible=e},change:t.reviewRemark}})],1)},staticRenderFns:[]};var x=n("VU/8")(_,w,!1,function(t){n("P0GK"),n("xsGQ")},"data-v-71ce4fba",null);e.default=x.exports},vf3P:function(t,e){},whND:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={props:{steps:Array,active:{type:Number,default:0},finishStatus:{type:String,default:"success"}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"xv-step"},[e("el-steps",{staticClass:"step",attrs:{active:this.active,"finish-status":this.finishStatus,"align-center":""}},this._l(this.steps,function(t,n){return e("el-step",{key:n,attrs:{title:t}})}),1)],1)},staticRenderFns:[]};var a=n("VU/8")(i,r,!1,function(t){n("SVAw")},"data-v-09697f22",null);e.default=a.exports},xsGQ:function(t,e){}});